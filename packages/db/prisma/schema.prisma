datasource db {
  provider = "postgres"
  url      = env("DATABASE_URL")
}

generator client {
  provider = "prisma-client-js"
}

model User {
  id                Int     @id @default(autoincrement())
  username          String  @unique
  name              String?
  password          String
  imageUrl          String? 
  profileFolderId   String?
  bookings          Booking[]
  Cars              Car[]
}

model Car {
  id                Int      @id @default(autoincrement())
  brand             String
  model             String
  plateNumber       String
  colorOfBooking    String
  price             Int
  mileage           Int
  imageUrl          String
  userId            Int
  totalEarnings     Int?
  carFolderId       String
  user              User     @relation(fields: [userId], references: [id])
  bookings          Booking[]
}


model Booking {     
  id                      Int      @id @default(dbgenerated("(floor(random() * (9999999 - 1000000 + 1)) + 1000000)::int")) @unique
  startDate               String
  endDate                 String
  startTime               String
  endTime                 String
  allDay                  Boolean
  status                  String
  carId                   Int
  userId                  Int
  customerName            String
  securityDeposit         String?
  customerContact         String
  dailyRentalPrice        Int
  car                     Car      @relation(fields: [carId], references: [id])
  user                    User     @relation(fields: [userId], references: [id])
  advancePayment          Int?
  totalEarnings           Int?
  customerAddress         String?
  paymentMethod           String?
  carPhotoUrl             String?
  selfieUrl               String?
  odometerReading         String? 
  notes                   String?
  documents               Documents[]
  carImages               CarImages[]
}

model Documents {
  id          Int      @id @default(autoincrement())
  url         String
  name        String
  type        String
  bookingId   Int
  folderId    String
  booking     Booking  @relation(fields: [bookingId], references: [id])
}

model CarImages {
  id        Int         @id @default(autoincrement())
  url       String
  name      String
  folderId  String
  bookingId Int
  booking   Booking     @relation(fields: [bookingId], references: [id])
}




